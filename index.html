---
layout: map
title: "Event-Kalender Hof"
---

<!-- BildschirmfÃ¼llende Karte -->
<div id="map" class="fullscreen-map"></div>

<!-- Bookmarks Toolbar (nur sichtbar wenn Bookmarks vorhanden) -->
<div id="bookmarks-toolbar" class="bookmarks-toolbar" style="display: none;">
    <div class="toolbar-content">
        <span class="toolbar-label">
            <strong id="bookmark-count">0</strong> Events gemerkt
        </span>
        <button class="toolbar-btn" onclick="printBookmarks()" title="Als PDF drucken">
            ğŸ–¨ï¸ Drucken
        </button>
        <button class="toolbar-btn" onclick="emailBookmarks()" title="Per E-Mail versenden">
            ğŸ“§ Mailen
        </button>
        <button class="toolbar-btn toolbar-btn-clear" onclick="clearAllBookmarks()" title="Alle Bookmarks lÃ¶schen">
            ğŸ—‘ï¸ Alle lÃ¶schen
        </button>
    </div>
</div>

<!-- Transparenter Header mit Suche -->
<header class="overlay-header">
    <div class="header-content">
        <button type="button" id="searchToggle" class="search-toggle" aria-label="Suche Ã¶ffnen">ğŸ”</button>
        
        <div id="searchPanel" class="search-panel collapsed">
            <input type="text" id="searchInput" placeholder="Events durchsuchen..." class="search-input">
        </div>
        
        <div class="event-info">
            <select id="categoryFilter" class="inline-select">
                <!-- Default Option -->
                <option value="" data-icon="{{ site.filters.default_filter_icon }}">{{ site.filters.default_filter_label }}</option>
                
                <!-- Dynamische Kategorien aus _config.yml -->
                {% for category in site.filters.categories %}
                <option value="{{ category.key }}" 
                        data-icon="{{ category.icon }}"
                        data-singular="{{ category.singular }}"
                        data-plural="{{ category.plural }}">{{ category.key }}</option>
                {% endfor %}
                
                <!-- Restkategorie (Sonstiges) - immer am Ende -->
                <option value="Sonstiges" 
                        data-icon="{{ site.filters.others_filter_icon }}"
                        data-singular="{{ site.filters.others_filter_label }}"
                        data-plural="{{ site.filters.others_filter_label }}">Sonstiges</option>
            </select>
            
            <select id="timeFilter" class="inline-select">
                <option value="sunrise" selected>ğŸŒ… bis Sonnenaufgang</option>
                <option value="tatort">ğŸ“º bis zum nÃ¤chsten Tatort</option>
                <option value="moon" id="moonOption">ğŸŒ• bis Vollmond</option>
            </select>
            
            <select id="radiusFilter" class="inline-select">
                <option value="1">ğŸš¶ 1 km Umkreis</option>
                <option value="3" selected>ğŸš´ 3 km Umkreis</option>
                <option value="10">ğŸšŒ 10 km Umkreis</option>
                <option value="999999">ğŸš• unbegrenzt</option>
            </select>
            
            <select id="locationSelect" class="inline-select">
                {% for venue in site.data.venues %}
                {% if venue.location_type != '' and venue.location_type != nil %}
                <option value="{{ venue.location_type }}" {% if venue.location_type == 'rathaus' %}selected{% endif %} data-icon="{{ venue.icon }}">{{ venue.name }}</option>
                {% endif %}
                {% endfor %}
                <option value="browser" data-icon="ğŸ¯">Mein Standort</option>
            </select>
        </div>
    </div>
</header>

<!-- Footer mit Logo -->
<footer class="overlay-footer">
    <div class="footer-content">
        <div class="footer-logo-area">
            <a href="https://github.com/feileberlin/krawl.ist/discussions" class="logo-link" target="_blank" rel="noopener" title="Diskussionen">
                <img src="{{ '/favicon.svg' | relative_url }}" alt="Logo" class="footer-logo">
            </a>
            <div class="build-info" title="Build: {{ site.data.build_info.commit_hash }} - {{ site.data.build_info.commit_date }}">
                <small>
                    {{ site.data.build_info.commit_hash }} Â· {{ site.data.build_info.commit_date | date: "%d.%m.%y %H:%M" }}
                    Â· <a href="{{ '/docs/privacy' | relative_url }}">Datenschutz</a>
                </small>
            </div>
        </div>
    </div>
</footer>

<!-- Event-Liste Sidebar (ausklappbar) -->
<div id="eventSidebar" class="event-sidebar collapsed">
    <button type="button" id="sidebarToggle" class="sidebar-toggle">ğŸ“‹</button>
    <div class="event-list" id="eventList">
        <div class="loading" id="loadingSpinner">
            <div class="spinner"></div>
            <p>Events werden geladen...</p>
        </div>
    </div>
</div>

<!-- Event-Daten MÃœSSEN VOR main.js geladen werden -->
<script>
// Event-Daten aus Jekyll
const allEvents = [
    {% for event in site.events %}
    {% if event.status == "Ã–ffentlich" %}
    {
        title: {{ event.title | jsonify }},
        date: "{{ event.date | date: '%Y-%m-%d' }}",
        startTime: "{{ event.start_time }}",
        endTime: "{{ event.end_time }}",
        location: {{ event.location | jsonify }},
        address: {{ event.address | jsonify }},
        category: {{ event.category | jsonify }},
        description: {{ event.description | jsonify }},
        url: "{{ event.url | relative_url }}",
        coordinates: {
            lat: {{ event.coordinates.lat | default: site.default_center.lat }},
            lng: {{ event.coordinates.lng | default: site.default_center.lng }}
        },
        tags: {{ event.tags | jsonify }}
    }{% unless forloop.last %},{% endunless %}
    {% endif %}
    {% endfor %}
];

// Standorte-Konfiguration (aus venues.csv - nur Venues mit location_type)
const LOCATIONS = {
    {% for venue in site.data.venues %}
    {% if venue.location_type != '' and venue.location_type != nil %}
    {{ venue.location_type }}: {
        lat: {{ venue.lat }},
        lng: {{ venue.lng }},
        name: {{ venue.name | jsonify }},
        icon: {{ venue.icon | jsonify }},
        color: {{ venue.color | jsonify }}
    }{% unless forloop.last %},{% endunless %}
    {% endif %}
    {% endfor %}
};

// Konfiguration
const config = {
    defaultCenter: {
        lat: {{ site.default_center.lat }},
        lng: {{ site.default_center.lng }}
    },
    defaultZoom: 14  // Zoom 14 = 3 km Umkreis (Rad)
};

console.log('Event-Daten geladen:', allEvents.length, 'Events');
console.log('Standorte geladen:', Object.keys(LOCATIONS).length, 'Locations');
console.log('Config:', config);
</script>
